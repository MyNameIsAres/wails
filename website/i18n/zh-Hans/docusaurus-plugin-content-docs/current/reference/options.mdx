---
sidebar_position: 3
---

# 备选方案

## 应用程序选项

`选项。App` 结构包含应用程序配置。 它传递到 `wails.Run()` 方法：

```go title="Example"
import "github.com/wailsapp/wails/v2/pkg/options"

func main() {

    err := wails.Run(&options.App{
        Title:              "Menus Demo",
        Width:              800,
        Height:             600,
        DisableResize:      false,
        Fullscreen:         false,
        Frameless:          true,
        MinWidth:           400,
        MinHeight:          400,
        MaxWidth:           1280,
        MaxHeight:          1024,
        StartHidden:        false,
        HideWindowOnClose:  false,
        BackgroundColour:   &options.RGBA{R: 0, G: 0, B: 0, A: 255},
        AlwaysOnTop:        false,
        Assets:             assets,
        AssetsHandler:      assetsHandler,
        Menu:               app.applicationMenu(),
        Logger:             nil,
        LogLevel:           logger.DEBUG,
        LogLevelProduction: logger.ERROR,
        OnStartup:          app.startup,
        OnDomReady:         app.domready,
        OnShutdown:         app.shutdown,
        OnBeforeClose:      app.beforeClose,
        WindowStartState:   options.Maximised,
        Bind: []interface{}{
            app,
        },
        Windows: &windows.Options{
            WebviewIsTransparent:              false,
            WindowIsTranslucent:               false,
            DisableWindowIcon:                 false,
            DisableFramelessWindowDecorations: false,
            WebviewUserDataPath:               "",
            WebviewBrowserPath:                "",
            Theme:                             windows.SystemDefault,
            CustomTheme: &windows.ThemeSettings{
                DarkModeTitleBar:   windows.RGB(20, 20, 20),
                DarkModeTitleText:  windows.RGB(200, 200, 200),
                DarkModeBorder:     windows.RGB(20, 0, 20),
                LightModeTitleBar:  windows.RGB(200, 200, 200),
                LightModeTitleText: windows.RGB(20, 20, 20),
                LightModeBorder:    windows.RGB(200, 200, 200),
            },
            // User messages that can be customised
            Messages *windows.Messages
        },
        Mac: &mac.Options{
            TitleBar: &mac.TitleBar{
                TitlebarAppearsTransparent: true,
                HideTitle:                  false,
                HideTitleBar:               false,
                FullSizeContent:            false,
                UseToolbar:                 false,
                HideToolbarSeparator:       true,
            },
            Appearance:           mac.NSAppearanceNameDarkAqua,
            WebviewIsTransparent: true,
            WindowIsTranslucent:  false,
            About: &mac.AboutInfo{
                Title:   "My Application",
                Message: "© 2021 Me",
                Icon:    icon,
            },
        },
        Linux: &linux.Options{
            Icon: icon,
        },
    })
    if err != nil {
        log.Fatal(err)
    }
}

```



### 标题

名称：标题

类型：字符串

窗口标题栏中显示的文本。

### Width

名称：宽度

类型：int

窗口初始宽度。 默认： 1024。

### 高度

名称：高度

类型：int

窗口初始高度 默认值： 768

### 禁用调整大小

名称：禁用调整大小

类型：布尔值

默认情况下，主窗口可以调整大小。 设置为 `true` 将保持固定的大小。

### 全屏

名称：全屏

类型：布尔值

设置为 `true` 将使启动时窗口全屏化。

### Frameless

姓名：Frameless

类型：布尔值

当设置为 `true`时，窗口将没有边框或标题栏。 同时查看 [Frameless Windows](../guides/frameless.mdx)。

### MinWidth

名称：最小宽度

类型：int

设置窗口的最小宽度。 如果在 `宽度` 中给出的值小于此值， 默认情况下，窗口将设置为 `最小宽度`。

### MinHeight

名称：最小高度

类型：int

设置窗口的最小高度 如果在 `高度` 中给出的值小于此值， 默认情况下，窗口将被设置为 `最小高度`。

### MaxWidth

名称: MaxWidth

类型：int

设置窗口最大宽度。 如果在 `宽度` 中给出的值超过此值， 默认情况下窗口将设置为 `MaxWidth`。

### MaxHeight

名称：最大高度

类型：int

设置窗口的最大高度 如果在 `高度` 中给出的值大于此值， 默认情况下，窗口将被设置为 `MaxHeight`。

### Start隐藏

姓名：Starthidden

类型：布尔值

当设置为 `true`时，应用程序将被隐藏，直到 [WindowShow](../reference/runtime/window.mdx#windowshow) 被调用。

### 隐藏窗口OnClose

名称：隐藏WindowOnClose

类型：布尔值

默认情况下，关闭窗口将关闭应用程序。 设置为 `true` 意味着关闭窗口 将隐藏窗口。

### 背景颜色

名称：背景颜色

类型：int (0xRRGGBBAA) 示例：0xFF000088 - Red at 50% 透明度

此值是窗口的默认背景颜色。 默认值： 0xFFFFFFFF。

### AlwaysOnTop

名称：总是指顶端

类型：布尔值

表示窗口在失去焦点时应保持在其他窗口之上。

### 资产

名称：资产

类型：embed.FS

应用程序使用的前端资产。 需要 `index.html` 文件。

### 资产处理器

<img src="http://badges.github.io/stability-badges/dist/experimental.svg" />

名称：资产处理器

类型：http.Handler


资产处理程序是一个通用的 `http. andler` 将被调用资产服务器上的任何非GET 请求 和 GET 请求，这些请求无法从 `资产` 发送，因为找不到该文件。

| 值     | 胜利 | 马奇文 | Lin |
| ----- | -- | --- | --- |
| 获取    | ✅  | ✅   | ✅   |
| 帖子    | ✅  | ✅   | ❌   |
| 弹出    | ✅  | ✅   | ❌   |
| PATCH | ✅  | ✅   | ❌   |
| 删除    | ✅  | ✅   | ❌   |
| 请求标题  | ✅  | ✅   | ❌   |
| 请求内容  | ✅  | ✅   | ❌   |
| 请求正文流 | ❌  | ❌   | ❌   |
| 响应状态码 | ✅  | ✅   | ❌   |
| 响应头   | ✅  | ✅   | ❌   |
| 响应体   | ✅  | ✅   | ✅   |
| 响应正文流 | ❌  | ❌   | ✅   |

注意：Linux目前非常有限，因为它的目标是一个 WebKit2GTK 版本 < 2.36.0。 今后，一些功能将由 WebKit2GTK 2.36.0+ 支持来支持 。

注意：如果与前端DevServer结合使用，可能会有限制，例如： Vite 在每条路径上使用 index.html ，它不包含文件扩展名。

### 菜单

名称：菜单

类型: \*menu.menu

应用程序要使用的菜单。 更多关于 [菜单引用中菜单菜单的详细信息](../reference/runtime/menu.mdx)。

注意：在Mac上，如果没有指定菜单，将创建一个默认菜单。

### Logger

名称：日志

Type: logger.Logger

Default: Logger to Stdout

应用程序要使用的记录器。 在 [日志引用](../reference/runtime/log.mdx) 中登录的更多详细信息。

### 日志级别

名称：日志级别

Type: logger.LogLevel

默认： `dev模式中的信息` 。 `在生产模式中的错误`

默认日志级别。 在 [日志引用](../reference/runtime/log.mdx) 中登录的更多详细信息。

### 日志等级生产

名称：LogLevel生产

Type: logger.LogLevel

默认： `错误`

生产构建的默认日志级别。 在 [日志引用](../reference/runtime/log.mdx) 中登录的更多详细信息。

### OnStartup

名称：启动

Type: func(ctx context.Context)

此回调是在前端创建完成后调用的，但在 `index.html` 加载之前。 它被赋予 应用程序背景。

### OnDomReady

名称：OnDomReady

Type: func(ctx context.Context)

此回调是在前端加载 `index.html` 及其资源后调用的。 它被赋予 应用程序背景。

### OnShutdut

名称：OnShutdown

Type: func(ctx context.Context)

这个回调是在前端被摧毁之后呼叫的，就在应用程序终止之前。 它被赋予 应用程序背景。

### OnBEfored关闭

名称：OnBEforeClose

Type: func(ctx context.Context) bool

如果设置此回调，将在应用程序即将退出时调用。 点击窗口关闭 按钮或调用 `运行时间。 uit`. 返回 true 将导致应用程序继续运行，false 将继续正常关闭 。 这有利于向用户确认他们希望退出程序。

示例：
```go title=windowsapp.go
func (b *App) beforeClose(ctx context.Context) (prevent bool) {
    dialog, err := runtime.MessageDialog(ctx, runtime.MessageDialogOptions{
        Type:          runtime.QuestionDialog,
        Title:         "Quit?",
        Message:       "Are you sure you want to quit?",
    })

    if err != nil {
        return false
    }
    return dialog != "Yes"
}
```

### WindowStartState

名称：WindowStartState

类型：options.WindowStartstate

定义启动时窗口的显示方式。

| 值   | 胜利 | 马奇文 | Lin |
| --- | -- | --- | --- |
| 全屏  | ✅  | ✅   | ✅   |
| 最大化 | ✅  | ✅   | ✅   |
| 最小化 | ✅  | ❌   | ✅   |

### Bind

名称：绑定

类型：[]interface{}

界定需要与前端结合的方法的结构性实例。

### 窗口

名称：窗口

类型: \*windows.options

这定义了 [个窗口特定选项](#windows-specific-options)。

### 马奇文

姓名：Mac

类型：\*mac.选项

这定义了 [Mac 特定选项](#mac-specific-options)。

### Linux

名称：Linux

类型：\*linux.选项

这定义了 [Linux 特定选项](#linux-specific-options)。

## Windows 特定选项

### WebviewIstransparent

名称：WebviewIstransparent

类型：布尔值

设置为 `true` 将在使用 `0` 的 alpha 值时使网页视图背景变得透明。 这意味着，如果您在 CSS 中使用 `rgba(0,0,0,0)` for `背景颜色` 则主机窗口将会显示通过。 通常会与 [WindowIsTranslucent](#WindowIsTranslucent) 合并以制作露冰雪的应用程序。

### WindowIs半透明模式

名称：WindowIsTranslucent

类型：布尔值

设置为 `true` 将使窗口背景变为半透明状态。 往往将 和 [Webviewisfillent](#WebviewIsTransparent) 结合起来，以使应用程序看起来是冰冻。

### 禁用窗口图标

名称：禁用窗口图标

类型：布尔值

设置为 `true` 将删除标题栏左上角的图标。

### 禁用FramelessWindowDecorations

名称：禁用FramelessWindowDecorations

类型：布尔值

设置为 `true` 将会删除在 [Frameless](#Frameless) 模式下的窗口装饰。 这意味着窗口将不会有 "Aero Shadow"和窗口不会显示“圆角角”。 请注意，只有 Windows 11才支持'圆角'

### Webview用户数据路径

名称： WebviewUserDataPath

类型：字符串

这定义了 WebView2 存储用户数据的路径。 如果为空 `%APPDATA%\[BinaryName.exe]` 将被使用。

### Webview浏览器路径

名称： WebviewBrowserPath

类型：字符串

这定义了使用 WebView2 可执行文件和库目录的路径。 如果为空，将使用在系统中安装的 webview2。

固定版本运行时间分布的重要信息：
- [如何获取和提取运行时间](https://docs.microsoft.com/en-us/microsoft-edge/webview2/concepts/distribution#details-about-the-fixed-version-runtime-distribution-mode)
- [固定版本已知问题](https://docs.microsoft.com/en-us/microsoft-edge/webview2/concepts/distribution#known-issues-for-fixed-version)
- [WebView2 运行时间的固定版本路径不应包含 \Edge\Application\。](https://docs.microsoft.com/en-us/microsoft-edge/webview2/reference/win32/webview2-idl?view=webview2-1.0.1245.22#createcorewebview2environmentwithoptions)

### 主题

名称：主题

类型： `个窗口。主题`

最小Windows版本： Windows 10 2004/20H1

这将定义应用程序应该使用的主题：

| 值             | 描述                                          |
| ------------- | ------------------------------------------- |
| SystemDefault | *默认*。 主题将以系统默认值为基础。 如果用户更改主题，应用程序将更新以使用新的设置 |
| 深色            | 应用程序将只使用黑色主题                                |
| 亮色的           | 应用程序将只使用一个浅色主题                              |


### 自定义主题

名称：自定义主题

类型： `windows.CustomTheme`

最小Windows版本：Windows 10/11 2009/21H2 编译22000

允许您指定标题栏、标题文本和边框的自定义颜色，既适用于亮色模式，也适用于暗色模式， 以及 当窗口处于活动状态或非活动状态。

#### 自定义主题

自定义主题结构使用 `int32` 来指定颜色值。 这些是标准(!) Windows格式： `0x00BGAA` 提供 RGB 函数转换为 `windows.RGB(r,g,b uint8)`。

注意：任何未提供的值都会默认黑入。

```go
type ThemeSettlements structure corp
    DarkModeTitleBar int32
    DarkModeTitleBarInactivity int32
    DarkModeTitleText int32
    DarkModeTitleTextInactivity int32
    DarkModeTitleBorderint32
    DarkModeTitleBar int32
    LightModeTitleBar int32
    LightModeTitleTitleText int32
    LightModeTitleText int32
    LightModeTitTextInactive int32
    LightModeBorderactive int32
    LightModeBorderactive int32
}
```

示例：
```go
    自定义主题： &窗口 hemeSettings@un.org
        // 窗口激活时要使用的主题
        DarkModeTitleBar：窗口。 GB(255, 0, 0), // Red
        DarkModeTitleText: windows. GB(0, 255, 0), // Green
        DarkModeBorder: windows. GB(0, 0, 255), // 蓝色
        LightModeTitleBar: windows. GB(200, 200, 200),
        LightModeTitleText: windows. GB(20, 20),
        LightModeBorder: windows. GB(200, 200, 200),
        // 窗口处于非活动状态时要使用的主题
        DarkModeTitleBaractivity: windows GB(128, 0, 0),
        DarkModeTitleTextInactivity: windows. GB(0, 128, 0),
        DarkModeBorder禁用：窗口。 GB(0, 0, 128),
        LightModeTitleBaractivity: windows. GB(100, 100, 100),
        LightModeTitleTextInactivity: windows. GB(10, 10, 10),
        LightModeBorderInactivity: windows.RGB(100, 100),
},
```

### 留言

姓名：消息

类型： `*windows.message`

如果找不到有效的 webview2 运行时间，webview2 安装程序使用的字符串结构。 为您选择支持的任何语言自定义此项。

### ResizeDebounceMS

名称：ResizeDebounceMS

类型：uint16

ResizeDebounceMS是调整窗口大小时取消重绘webview2的时间。 默认值 (0) 将执行尽可能快的重绘。

### 待机

名称：待定

类型：func()

如果设置，这个函数将在窗口启动切换到低功率模式时调用(挂起/休眠)

### Onume

名称：OnResume

类型：func()

如果设置，这个函数将在窗口从低功率模式恢复时调用(暂停/休眠)



## Mac 特定选项

### 标题栏

名称：标题栏

Type: [*mac.TitleBar](#titlebar-struct)

标题栏结构能够配置标题栏的外观和感觉。

### 外观

名称：外观

类型： [外观类型](#appearance-type)

外观用于根据Apple的 [NSAppearing](https://developer.apple.com/documentation/appkit/nsappearancename?language=objc) 名称设置您的应用风格。

### WebviewIstransparent

名称：WebviewIstransparent

类型：布尔值

设置为 `true` 将在使用 `0` 的 alpha 值时使网页视图背景变得透明。 这意味着，如果您在 CSS 中使用 `rgba(0,0,0,0)` for `背景颜色` 则主机窗口将会显示通过。 通常会与 [WindowIsTranslucent](#WindowIsTranslucent) 合并以制作露冰雪的应用程序。

### WindowIs半透明模式

名称：WindowIsTranslucent

类型：布尔值

设置为 `true` 将使窗口背景变为半透明状态。 往往将 和 [Webviewisfillent](#WebviewIsTransparent) 结合起来，以使应用程序看起来是冰冻。

### 关于

名称: 关于

类型： [关于](#about-struct)

此配置允许您在“应用菜单”角色创建的应用菜单中设置“关于”菜单项的标题、消息和图标。

#### 标题栏结构

应用程序的标题栏可以通过使用标题栏选项自定义：

```go
键入标题栏结构 &#
    TitlebarAppearsTransparent bool
    HideTitle bool
    HideTitleBar bool
    FullSizeContent bool
    UseToolbar bool
    HideToolbarSeparator bool
}
```

| 名称                   | 描述                                                                                                                                            |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| 标题透明化                | 提高标题栏的透明度。 这会隐藏标题栏，内容填充窗口。 [苹果文档](https://developer.apple.com/documentation/appkit/nswindow/1419167-titlebarappearstransparent?language=objc) |
| HideTitle            | 隐藏窗口标题。 [苹果文档](https://developer.apple.com/documentation/appkit/nswindowtitlevisibility?language=objc)                                        |
| 隐藏栏                  | 从样式掩码中移除 [NSWindowStyleMaskTitleed](https://developer.apple.com/documentation/appkit/nswindowstylemask/nswindowstylemasktitled/)              |
| 完全大小内容               | 使网页视图填充整个窗口。 [苹果文档](https://developer.apple.com/documentation/appkit/nswindowstylemask/nswindowstylemaskfullsizecontentview)                  |
| 使用工具栏                | 将默认工具栏添加到窗口。 [苹果文档](https://developer.apple.com/documentation/appkit/nstoolbar?language=objc)                                                 |
| HideToolbarSeparator | 移除工具栏下方的线。 [苹果文档](https://developer.apple.com/documentation/appkit/nstoolbar/1516954-showsbaselineseparator?language=objc)                    |

预配置的标题栏设置可用：

| 设置                          | 示例                                            |
| --------------------------- | --------------------------------------------- |
| `mac.TitleBarDefault()`     | ![](/img/reference/titlebar-default.png)      |
| `mac.TitleBarHidden()`      | ![](/img/reference/titlebar-hidden.png)       |
| `mac.TitleBarhiddenInset()` | ![](/img/reference/titlebar-hidden-inset.png) |

示例：
```go
Mac： &mac.Options.pdf
    TitleBar: mac.TitleBariddenInset(),
}
```

Click [here](https://github.com/lukakerr/NSWindowStyles) for some inspiration on customising the titlebar.

#### 外观类型

您可以指定应用程序的 [外观](https://developer.apple.com/documentation/appkit/nsappearance?language=objc)。

| 值                                                     | 描述              |
| ----------------------------------------------------- | --------------- |
| 默认外观                                                  | 默认外观使用默认系统值     |
| NisaranceNameAqua                                     | 标准光线系统外观        |
| NisapparanceNameDarkAqua                              | 标准暗色系统外观        |
| NisaranceNameVibrantLight                             | 光明的活跃外观         |
| NSappearanceNameAccessibilityHighContrastAqua         | 标准光系统外观的高对比度版本  |
| NSappearanceNameAccessibilityHighContrastDarkAqua     | 标准黑暗系统外观的高对比度版本 |
| NSappearanceNameAccessibilityHighContrastVibrantLight | 高对比度的光生动外观      |
| NSappearanceNameAccessibilityHighContrastVibrantDark  | 黑暗活跃外观的高对比度版本   |

示例：
```go
Mac： &mac.Options}
    外观：mac.NSApparanceNameDarkAqua,
}
```

#### 关于结构

```go
输入 AboutInfo struct ->
    标题字符串
    信件字符串
    图标 []byte
}
```
如果提供了这些设置，应用菜单中将出现“关于”菜单项(当使用 `应用菜单` 角色时)。 基于此配置：
```go
//go:嵌入构建/appicon.png
var 图标[]byte

func main()
    err := wails.Run(&options.Appvol.
...
        Mac: &mac.Options@un.org
            About: &mac.AboutInfo@un.org
                Title: "My Application",
                Message: "© 2021 Me",
                Icon: icon,
            },
        },
})
```
“关于”菜单项将显示在应用菜单中：

<div class="text--center">
    <img src="/img/reference/about-menu.png" style={{"box-shadow": "rgb(255 255 >
</div>

<br/>

当点击时，将打开一个关于消息框的信息：

<div class="text--center">
    <img src="/img/reference/about-dialog.png" width="40%" style={{"box-shadow": "rgb(255 255 >
</div>

<br/>

## Linux 特定选项

### 图标

名称：图标

类型：[]字节

设置代表窗口的图标 当窗口最小化时使用此图标（也称为图标）。 某些窗口管理员或桌面环境也可能将其放在窗口框架内，或在其他环境中显示。 在其他情况下，图标根本没有使用，所以您的里程可能会有变化。

注意：Wayland上至少没有显示此图标。 要有应用程序图标，必须使用 `.desktop` 文件。 在 KDE 上，它应该正常工作。

该图标应以其自然绘图的大小提供；也就是说，在通过之前不缩放图像。 缩放将推迟到最后一分钟，届时已知道所需的最终大小，以便达到最佳质量。
