# 故障排除

各种故障排除技巧。

## 我的应用程序显示白色/空白屏幕

If your system is reporting that the `wails` command is missing, make sure you have followed the Go installation guide correctly. 通常情况下，这意味着用户主目录中的 `go/bin` 目录不在 `PATH` 环境 变量。 您通常还需要关闭并重新打开任何打开的命令提示，以便安装器对环境 的更改能够反映在命令提示中。

## Mac 应用程序无效

检查您的应用程序是否在正确目录中包含资源。 在您的`main.go`文件中，您将拥有类似于以下代码的内容：

```go
//go:embed frontend/dist
var assets embed.FS
```
如果您构建的应用程序在 finder 中如下所示：

### 马奇文

如果在 Mac 上发生这种情况，请尝试在您的 `Info.plist` 中添加以下内容：

```xml
<key>NSAppTransportSecurity</key>
<dict>
    <key>NSallowsLocalNetworking</key>
    <true/>
</dict>
```

参考： https://github.com/wailsapp/wails/issues/1504#issuecomment-1174317433

## 前端调用后端方法无法使用可变参数

如果您有使用可变参数定义的后端方法，例如：

<p className="text--center">
    <img src="/img/troubleshooting/invalid_mac_app.png"></img>
</p>

您的应用程序的 `info.plist` 可能无效。 更新 `build/<yourapp>.app/Contents/info.plist` 文件并检查数据是否有效，例如二进制文件名称是否正确。 要保留更改，请将文件复制回 `build/darwin` 目录。

## 尝试安装 Wails 时遇到代理错误

归功于：https://github.com/wailsapp/wails/issues/1186
```go
func (a *App) TestFunc(msg string, args ...interface{}) error {
    // Code
}
```
如果您遇到这样的错误：
```js
var msg = "Hello ";
var args = ["Go", "JS"];
window.go.main.App.TestFunc(msg, args)
  .then((result) => {
    // 不需要展开符
    // do things here
  })
  .catch((error) => {
    //handle error
  });
```
解决办法：
```js
var msg = "Hello: ";
var args = ["Go", "JS"];
window.go.main.App.TestFunc(msg, ...args)
  .then((result) => {
    //do things here
  })
  .catch((error) => {
    //handle error
  });
```
来源：https://github.com/wailsapp/wails/issues/1233

## 尝试安装Wail时，我会得到代理错误

如果您正在获取像这样的错误：
```
"https://proxy.golang.org/github.com/wailsapp/wails/cmd/wails/@v/list": dial tcp 172.217.163.49:443: connectex: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
```
这可能是因为官方 Go Proxy 被阻止（中国用户反馈了这一点）。 解决方案是手动设置代理，例如：
```
go env -w GO111MODULE=on
go env -w GOPROXY=https://goproxy.cn,direct
```
资料来源：https://github.com/wailsapp/wails/issues/1233。

## 生成的类型不正确

有时生成的类型不正确。 为了缓解这个问题， 可以指定使用 `ts_type` struct 标签生成哪些类型。 更多详情，请阅读 [](https://github.com/tkrajina/typescriptify-golang-structs#custom-types)。

## 检查`frontend/dist`中是否包含您的应用程序资源。

如果您从 `index.html` 到新的 html 文件导航，上下文将丢失。 可以通过在您导航到的任何新页面中添加 个导入到 `<head>` 部分来解决这个问题：

```html
<head>
    <script src="/wails/ipc.js"></script>
    <script src="/wails/runtime.js"></script>
</head>
```

资料来源：https://github.com/wailsapp/wails/discussions/1512。