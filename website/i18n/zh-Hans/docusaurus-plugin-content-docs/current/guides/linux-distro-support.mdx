
# Linux Distro 支持

## 概览

Wails提供Linux支持，但为所有可用发行版提供安装说明是不可能的。 相反，Wails试图确定您需要开发应用程序的软件包是否可以通过您的系统包 管理器获得。 目前，我们支持以下软件包管理员：

- 小贴士
- dnf
- 出现了
- eopkg
- nixpkgs
- pacman
- zyper

## 添加软件包名称

在某些情况下，您的磁盘可能使用支持的软件包管理器之一，但是包名 不同。 例如，您可以使用 Ubuntu 衍生工具，但gtk 的软件包名称可能不同。 发送 通过一个软件包名称列表来尝试找到正确的软件包。 软件包列表存储在 `v2/internal/system/packemanager` 目录中的包管理器特定文件。 在我们的例子中，这将是 `v2/internal/system/packemanager/apt.go`。

在这个文件中，包列表是由 `Packages()` 方法定义的：

```go
func (a *Apt) Packages() packagemap {
    return packagemap{
        "libgtk-3": []*Package{
            {Name: "libgtk-3-dev", SystemPackage: true, Library: true},
        },
        "libwebkit": []*Package{
            {Name: "libwebkit2gtk-4.0-dev", SystemPackage: true, Library: true},
        },
        "gcc": []*Package{
            {Name: "build-essential", SystemPackage: true},
        },
        "pkg-config": []*Package{
            {Name: "pkg-config", SystemPackage: true},
        },
        "npm": []*Package{
            {Name: "npm", SystemPackage: true},
        },
        "docker": []*Package{
            {Name: "docker.io", SystemPackage: true, Optional: true},
        },
    }
}
```

让我们假设，在我们的 linux distro, `libgtk-3` 被打包在 `lib-gtk3-dev` 中。 我们可以通过增加以下行来增加对此的支持：

```go {5}
func (a *Apt) Packages() packagemap {
    return packagemap{
        "libgtk-3": []*Package{
            {Name: "libgtk-3-dev", SystemPackage: true, Library: true},
            {Name: "lib-gtk3-dev", SystemPackage: true, Library: true},
        },
        "libwebkit": []*Package{
            {Name: "libwebkit2gtk-4.0-dev", SystemPackage: true, Library: true},
        },
        "gcc": []*Package{
            {Name: "build-essential", SystemPackage: true},
        },
        "pkg-config": []*Package{
            {Name: "pkg-config", SystemPackage: true},
        },
        "npm": []*Package{
            {Name: "npm", SystemPackage: true},
        },
        "docker": []*Package{
            {Name: "docker.io", SystemPackage: true, Optional: true},
        },
    }
}
```

## 添加新的软件包管理器

要添加一个新的软件包管理器，执行以下步骤：

- 在 `v2/internal/system/packemanager` 调用 `<pm>.go`中创建一个新的文件，其中 `<pm>` 是包管理器的名称。
- 定义一个符合 `pm.go` 定义的包管理界面的结构：

```go
类型 PackageManager 界面 ！
    Name() 字符串
    Packages() 软件包
    PackageInstalled(*Package) (bool, 错误)
    PackageAvailable(*Package) (bool, 错误)
    InstallCommand(*Package) 字符串
}
```
- `Name()` 应该返回包管理器的名称
- `Packages()` 应该返回一个 `packemap`, 它为依赖关系提供候选文件名
- `如果安装了指定的软件包，PackageInstaled()` 应该返回 `true`
- `PackageAvailable()` 应该返回 `true` 如果指定的软件包没有安装但可以安装
- `InstallCommand()` 应该返回准确的命令来安装给定的软件包名称

查看其它软件包管理员代码，了解这种方法是如何运作的。

:::info Remember
如果您增加了对新软件包管理器的支持，请不要忘记更新此页面！
:::